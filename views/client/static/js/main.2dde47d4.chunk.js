(this["webpackJsonpentrance-monitor-client"]=this["webpackJsonpentrance-monitor-client"]||[]).push([[0],{64:function(e,t,n){e.exports=n(95)},69:function(e,t,n){},70:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},71:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(7),c=n.n(l),u=(n(69),n(70),n(71),n(16)),i=n(19),o=n(10),s=n.n(o),d=n(17),m=function(){var e,t,n,a=arguments;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:"",t=a.length>1&&void 0!==a[1]?a[1]:{},r.next=4,s.a.awrap(fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 4:return n=r.sent,r.next=7,s.a.awrap(n.json());case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}))},f=n(122),g=n(127),v=n(126),b=n(56),h=n.n(b),p=n(57),E=n.n(p),w=n(20),O=n(30),S=n.n(O),x=Object(f.a)((function(e){return{container:{position:"absolute",width:"100%",height:"100%",backgroundColor:"#244e7b",alignContent:"center",justifyContent:"center",color:"white"},gridCellCentered:{justifyContent:"center",alignContent:"center",display:"grid"},textField:{"& label, & input":{color:"white"},"& fieldset":{borderColor:"rgba(255, 255, 255, 0.23)"},"& .MuiOutlinedInput-root.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"white",borderWidth:"2px"}},"& .MuiFormLabel-root.Mui-focused":{color:"white"},"& .MuiOutlinedInput-root:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.87)"}}},links:{"& a":{color:"white"},"& a:visited":{color:"white"}},indicatorsCell:{display:"grid",justifyContent:"right"},link:{cursor:"pointer",textDecoration:"underline"}}})),j=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(null),i=Object(d.a)(c,2),o=i[0],m=i[1],f=Object(a.useState)(!1),b=Object(d.a)(f,2),p=b[0],O=b[1],j=Object(a.useState)(!1),y=Object(d.a)(j,2),I=y[0],C=y[1],k=x();Object(a.useEffect)((function(){var e=localStorage.getItem("guestsBacklog");e&&e.length>0&&_()}),[]);var N=r.a.createRef(),G=function(e){var t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return l(!0),O(!1),m(!1),t=N.current,null==e&&(e={guestId:N.current.value}),n.abrupt("return",S()({method:"post",url:"https://entrance-monitor.azurewebsites.net/addGuest",timeout:5e3,data:e}).then((function(e){return l(!1),null!=e.data&&e.data.success?O(!0):m(!0),t.value="",I&&C(!1),e.data})).catch((function(n){return m(!0),C(!0),H({guestId:e.guestId}),t.value="",{success:!1}})).finally((function(){l(!1)})));case 6:case"end":return n.stop()}}))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.guestId;l(!0),O(!1),m(!1),null==t&&(t=N.current.value);var n=JSON.parse(localStorage.getItem("guestsBacklog"));null==n&&(n=[]),null==n.find((function(e){return e.guestId===t}))&&(n.push({guestId:t,arrival_time:(new Date).toISOString()}),localStorage.setItem("guestsBacklog",JSON.stringify(n))),l(!1),O(!0),N.current&&(N.current.value="")},_=function(){var e=JSON.parse(localStorage.getItem("guestsBacklog"));if(null!=e){var t=[];e.forEach((function(e){return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t.push(G(e));case 1:case"end":return n.stop()}}))})),S.a.all(t).then(S.a.spread((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.every((function(e){return e&&e.success}))&&localStorage.setItem("guestsBacklog",JSON.stringify([]))})))}},M=function(e){e&&e.preventDefault(),I?H():G()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{className:k.container,columns:"1fr auto 1fr",rows:"1fr auto auto 1fr",areas:["nav title indicators",". form hiddenSubmit",". loader .",". . ."]},r.a.createElement(w.a,{area:"nav",className:k.links},r.a.createElement(u.b,{to:"/client/viewGuests"}," View Guests ")," ",r.a.createElement("br",null),r.a.createElement(u.b,{to:"/client/viewExpected"}," Expected ")),r.a.createElement(w.a,{area:"title"},"Entrance Monitoring System"),r.a.createElement(w.a,{area:"form"},r.a.createElement("form",{onSubmit:M},r.a.createElement(g.a,{id:"outlined-required",label:"Guest ID",className:k.textField,margin:"normal",variant:"outlined",inputRef:N,autoFocus:!0,disabled:n}))),r.a.createElement(w.a,{area:"indicators",className:k.indicatorsCell},r.a.createElement("div",null,I?r.a.createElement("div",null," Offline, try ",r.a.createElement("span",{onClick:_,className:k.link}," reconnecting ")," "):null)),r.a.createElement(w.a,{area:"hiddenSubmit",onClick:M}),r.a.createElement(w.a,{area:"loader",className:k.gridCellCentered},o?r.a.createElement("div",{style:{color:"red"}}," ",r.a.createElement(h.a,null)," "):null,n?r.a.createElement(v.a,{color:"inherit"}):null,p?r.a.createElement("div",{style:{color:"".concat(I?"orange":"lime")}},r.a.createElement(E.a,null)):null)))},y=n(29),I=(n(52),function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],l=t[1];return Object(a.useEffect)((function(){!function(){var e;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=5;break}return t.next=3,s.a.awrap(m("https://entrance-monitor.azurewebsites.net/allGuests"));case 3:e=t.sent,l(e.results);case 5:case"end":return t.stop()}}))}()})),r.a.createElement("div",null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/client/"}," Add Guest ")," ",r.a.createElement("br",null),r.a.createElement(u.b,{to:"/client/viewExpected"}," Expected ")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,"Total Guests: ",n.length),r.a.createElement(y.a,{data:n,filterable:!0,defaultFilterMethod:function(e,t){return String(t[e.id]).includes(e.value)},columns:[{Header:"DB Info",columns:[{Header:"ID",accessor:"id"}]},{Header:"Guest Info",columns:[{Header:"Personal Number",accessor:"guest_id",filterMethod:function(e,t){return t[e.id].startsWith(e.value)}},{Header:"Name",accessor:"guest_name"}]},{Header:"Arrival Info",columns:[{Header:"Arrival Time",accessor:"arrival_time",Cell:function(e){return r.a.createElement("span",null,e.value?new Date(e.value).toLocaleTimeString():null)}}]}],defaultPageSize:10,className:"-striped -highlight"})):null)}),C=n(60),k=function(){var e,t=Object(a.useState)(null),n=Object(d.a)(t,2),l=n[0],c=n[1],i=Object(a.useState)(null),o=Object(d.a)(i,2),f=o[0],g=o[1],v=Object(a.useState)(null),b=Object(d.a)(v,2),h=b[0],p=b[1];(Object(a.useEffect)((function(){!function(){var e;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(f){t.next=5;break}return t.next=3,s.a.awrap(m("https://entrance-monitor.azurewebsites.net/allExpectedGuests"));case 3:e=t.sent,g(e.results);case 5:case"end":return t.stop()}}))}()})),Object(a.useEffect)((function(){!function(){var e;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(h){t.next=5;break}return t.next=3,s.a.awrap(m("https://entrance-monitor.azurewebsites.net/allGuests"));case 3:e=t.sent,p(e.results);case 5:case"end":return t.stop()}}))}()})),f&&h&&!l)&&c(f.map((function(t){return Object(C.a)({},t,{arrived:h.some((function(e){return e.guest_id===t.guest_id})),arrival_time:null!=(e=h.find((function(e){return t.guest_id===e.guest_id})))?e.arrival_time:null})})));return r.a.createElement("div",null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/client/"}," Add Guest ")," ",r.a.createElement("br",null),r.a.createElement(u.b,{to:"/client/viewGuests"}," View Guests ")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,"Total Guests: ",l.filter((function(e){return e.arrived})).length," / ",l.length),r.a.createElement(y.a,{data:l,filterable:!0,defaultFilterMethod:function(e,t){return String(t[e.id]).includes(e.value)},columns:[{Header:"DB Info",columns:[{Header:"ID",accessor:"id"}]},{Header:"Guest Info",columns:[{Header:"Personal Number",accessor:"guest_id",filterMethod:function(e,t){return t[e.id].startsWith(e.value)}},{Header:"Name",accessor:"guest_name"},{Header:"Arrived",accessor:"arrival_time",Cell:function(e){return r.a.createElement("span",null,r.a.createElement("span",{style:{color:e.value?"#57d500":"#ff2e00"}},"\u25cf")," ",e.value?"Yes "+new Date(e.value).toLocaleTimeString():"No")}}]}],defaultPageSize:10,className:"-striped -highlight"})):null)};var N=function(){return r.a.createElement(u.a,null,r.a.createElement(i.a,{exact:!0,path:"/client/"},r.a.createElement(j,null)),r.a.createElement(i.a,{exact:!0,path:"/client/viewGuests"},r.a.createElement(I,null)),r.a.createElement(i.a,{exact:!0,path:"/client/viewExpected"},r.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.2dde47d4.chunk.js.map